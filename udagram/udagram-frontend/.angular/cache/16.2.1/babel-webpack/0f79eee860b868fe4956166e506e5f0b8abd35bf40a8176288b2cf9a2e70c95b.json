{"ast":null,"code":"import _asyncToGenerator from \"D:/Full_Stack_JavaScript/Deploy/nd0067-c4-deployment-process-project-starter/udagram/udagram-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"D:/Full_Stack_JavaScript/Deploy/nd0067-c4-deployment-process-project-starter/udagram/udagram-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { FeedItem } from '../models/feed-item.model';\nimport { BehaviorSubject } from 'rxjs';\nimport { ApiService } from '../../api/api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../api/api.service\";\nexport let FeedProviderService = /*#__PURE__*/(() => {\n  var _class;\n  class FeedProviderService {\n    constructor(api) {\n      _defineProperty(this, \"api\", void 0);\n      _defineProperty(this, \"currentFeed$\", new BehaviorSubject([]));\n      this.api = api;\n    }\n    getFeed() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const req = yield _this.api.get('/feed');\n        const items = req.rows;\n        _this.currentFeed$.next(items);\n        return Promise.resolve(_this.currentFeed$);\n      })();\n    }\n    uploadFeedItem(caption, file) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const res = yield _this2.api.upload('/feed', file, {\n          caption: caption,\n          url: file.name\n        });\n        const feed = [res, ..._this2.currentFeed$.value];\n        _this2.currentFeed$.next(feed);\n        return res;\n      })();\n    }\n  }\n  _class = FeedProviderService;\n  _defineProperty(FeedProviderService, \"\\u0275fac\", function FeedProviderService_Factory(t) {\n    return new (t || _class)(i0.ɵɵinject(i1.ApiService));\n  });\n  _defineProperty(FeedProviderService, \"\\u0275prov\", /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: _class,\n    factory: _class.ɵfac,\n    providedIn: 'root'\n  }));\n  return FeedProviderService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}